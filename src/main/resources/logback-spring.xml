<?xml version="1.0" encoding="UTF-8"?>
<configuration>

	<springProperty name="LOG_PATH" source="log.path" />
	<springProperty name="LOG_PACKAGE" source="log.package" />

	<appender name="SAVE-TO-FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${LOG_PATH}/siiu-seguimproyectos-back.log </file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- daily rollover -->
            <fileNamePattern>${LOG_PATH}/siiu-seguimproyectos-back.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <!-- keep 90 days' -->
            <maxHistory>90</maxHistory>
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <!-- or whenever the file size reaches 50MB -->
                <maxFileSize>50MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
        </rollingPolicy>

        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <Pattern>
                %d{dd-MM-yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36}.%M - %msg%n
            </Pattern>
        </encoder>
    </appender>

	<appender name="CONSOLE"
		class="ch.qos.logback.core.ConsoleAppender">
		<layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
			</Pattern>
		</layout>
	</appender>

	<springProfile name="dev">
		<logger name="${LOG_PACKAGE}" level="TRACE" additivity="false">
			<appender-ref ref="CONSOLE" />
		</logger>
		<logger name="org.hibernate.SQL" level="TRACE"
			additivity="false">
			<appender-ref ref="CONSOLE" />
		</logger>
		<logger name="org.hibernate.type.descriptor.sql" level="TRACE"
			additivity="false">
			<appender-ref ref="CONSOLE" />
		</logger>
		<root level="INFO">
			<appender-ref ref="CONSOLE" />
		</root>
	</springProfile>

	<springProfile name="dllo">
		<logger name="${LOG_PACKAGE}" level="INFO" additivity="false">
			<appender-ref ref="SAVE-TO-FILE" />
		</logger>
		<logger name="org.hibernate.SQL" level="DEBUG"
			additivity="false">
			<appender-ref ref="SAVE-TO-FILE" />
		</logger>
		<logger name="org.hibernate.type.descriptor.sql" level="TRACE"
			additivity="false">
			<appender-ref ref="SAVE-TO-FILE" />
		</logger>
		<root level="INFO" >
			<appender-ref ref="SAVE-TO-FILE"  />
			<appender-ref ref="CONSOLE"  />
		</root>
	</springProfile>

	<springProfile name="test">
		<logger name="${LOG_PACKAGE}" level="INFO" additivity="false">
			<appender-ref ref="SAVE-TO-FILE" />
		</logger>
		<root level="ERROR">
			<appender-ref ref="SAVE-TO-FILE" />
		</root>
	</springProfile>
	
	<springProfile name="prod">
		<logger name="${LOG_PACKAGE}" level="DEBUG" additivity="false">
			<appender-ref ref="SAVE-TO-FILE" />
		</logger>
		<root level="ERROR">
			<appender-ref ref="SAVE-TO-FILE" />
		</root>
	</springProfile>
</configuration>